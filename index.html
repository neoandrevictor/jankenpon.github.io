<!DOCTYPE html>
<html lang="pt-BR">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            body {
                background-color: black;
            }

            .elemento {
                position: absolute;
            }
        </style>
        <title>Jankenpon</title>
    </head>

    <body>
        <div id="campo"></div>
        <script>
            class Elemento {
                constructor() {
                    this.opcoes = ['ü™®', 'üìÑ', '‚úÇÔ∏è'];
                    this.campo = document.getElementById('campo');
                    this.span = null;
                    this.criarSpan();
                    this.mover();
                }

                criarSpan() {
                    this.span = document.createElement('span');
                    this.span.className = 'elemento';
                    const caractereAleatorio = this.opcoes[Math.floor(Math.random() * this.opcoes.length)];
                    this.span.textContent = caractereAleatorio;

                    // Posicionando inicialmente dentro da √°rea vis√≠vel da tela
                    this.posicionarSpan();

                    this.campo.appendChild(this.span);
                }

                posicionarSpan() {
                    const offsetX = Math.random() * (window.innerWidth - 50); // 50 √© a largura do span
                    const offsetY = Math.random() * (window.innerHeight - 20); // 20 √© a altura do span
                    this.span.style.left = offsetX + 'px';
                    this.span.style.top = offsetY + 'px';
                }

                mover() {
                    const targetX = Math.random() * (window.innerWidth - 50);
                    const targetY = Math.random() * (window.innerHeight - 20);
                    const startX = this.span.offsetLeft;
                    const startY = this.span.offsetTop;
                    const step = 1; // Define o n√∫mero de pixels a serem movidos em cada passo
                    const duration = 1000; // Define a dura√ß√£o total da anima√ß√£o em milissegundos
                    const steps = duration / step; // Calcula o n√∫mero total de passos

                    let stepCount = 0;

                    const moveStep = () => {
                        const progress = stepCount / steps;
                        const currentX = startX + (targetX - startX) * progress;
                        const currentY = startY + (targetY - startY) * progress;
                        this.span.style.left = currentX + 'px';
                        this.span.style.top = currentY + 'px';

                        // Verifica se houve colis√£o com outros elementos
                        this.verificarColisao();

                        stepCount++;
                        if (stepCount < steps) {
                            setTimeout(moveStep, step); // Chama a pr√≥xima etapa ap√≥s o intervalo de tempo definido
                        } else {
                            this.mover(); // Reinicia o movimento
                        }
                    };

                    moveStep();
                }

                verificarColisao() {

                    let elementos = document.querySelectorAll('.elemento');

                    let primeiroIcone = elementos[0].textContent;
                    if (elementos.length > 1) {
                        let todosIguais = true; // Assume all elements are equal initially

                        for (let i = 1; i < elementos.length; i++) {
                            if (elementos[i].textContent !== primeiroIcone) {
                                todosIguais = false;
                                break; // Exit the loop as soon as a different element is found
                            }
                        }
                        if (todosIguais) {
                            // Limpar conte√∫do da div
                            document.getElementById('campo').innerHTML = '';

                            // Aumentar o n√≠vel
                            nivel++;

                            // Iniciar um novo jogo
                            newGame();
                            return;
                        }
                    }

                    elementos.forEach(elemento => {
                        if (elemento !== this.span) {
                            const rect1 = this.span.getBoundingClientRect();
                            const rect2 = elemento.getBoundingClientRect();


                            if (rect1.x < rect2.x + rect2.width &&
                                rect1.x + rect1.width > rect2.x &&
                                rect1.y < rect2.y + rect2.height &&
                                rect1.y + rect1.height > rect2.y) {
                                // Colis√£o detectada, troca os √≠cones
                                const temp = this.span.textContent;
                                if ((elemento.textContent == "ü™®" && temp == "‚úÇÔ∏è") ||
                                    (elemento.textContent == "‚úÇÔ∏è" && temp == "üìÑ") ||
                                    (elemento.textContent == "üìÑ" && temp == "ü™®")) {

                                    this.span.textContent = elemento.textContent;
                                }

                            }
                        }
                    });
                }
            }
            nivel = 2;
            let elementosLista;
            function newGame() {

                elementosLista = [];
                for (let k = 0; k < nivel; k++) {
                    elementosLista.push(new Elemento());
                }
            }

            newGame();

        </script>
    </body>

</html>